# PROMPT 1: Proje AltyapÄ±sÄ± ve Initial Setup

## ğŸ¯ AmaÃ§
Bu aÅŸamada AI-Doctor projesinin temel altyapÄ±sÄ±nÄ± kuracaÄŸÄ±z. Backend ve mobil uygulama iÃ§in klasÃ¶r yapÄ±larÄ± oluÅŸturacaÄŸÄ±z ve gerekli baÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kleyeceÄŸiz.

## ğŸ“‹ YapÄ±lacaklar

### 1. Backend Projesi Kurulumu
```bash
# Ana proje klasÃ¶rÃ¼ oluÅŸtur
mkdir ai-doctor
cd ai-doctor

# Backend klasÃ¶rÃ¼ oluÅŸtur
mkdir backend
cd backend

# Node.js projesi baÅŸlat
npm init -y

# BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kle
npm install express cors dotenv bcryptjs jsonwebtoken
npm install @prisma/client
npm install --save-dev prisma nodemon

# Prisma'yÄ± initialize et
npx prisma init
```

### 2. Backend KlasÃ¶r YapÄ±sÄ± OluÅŸtur
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ database.js
â”‚   â”‚   â””â”€â”€ constants.js
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ authMiddleware.js
â”‚   â”‚   â””â”€â”€ errorMiddleware.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ logger.js
â”‚   â”‚   â””â”€â”€ response.js
â”‚   â””â”€â”€ app.js
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma
â”œâ”€â”€ tests/
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â””â”€â”€ server.js
```

### 3. Backend package.json Scripts Ekle
```json
{
  "scripts": {
    "dev": "nodemon server.js",
    "start": "node server.js",
    "prisma:generate": "prisma generate",
    "prisma:migrate": "prisma migrate dev",
    "prisma:studio": "prisma studio",
    "test": "jest"
  }
}
```

### 4. .gitignore DosyasÄ± OluÅŸtur
```
node_modules/
.env
dist/
build/
*.log
.DS_Store
coverage/
```

### 5. .env.example DosyasÄ± OluÅŸtur
```
NODE_ENV=development
PORT=5000
DATABASE_URL=postgresql://user:password@localhost:5432/aidoctor
JWT_SECRET=your-super-secret-jwt-key-change-this
JWT_REFRESH_SECRET=your-refresh-secret-key-change-this
JWT_EXPIRE=15m
JWT_REFRESH_EXPIRE=7d
```

### 6. server.js (Entry Point) OluÅŸtur
```javascript
require('dotenv').config();
const app = require('./src/app');

const PORT = process.env.PORT || 5000;

app.listen(PORT, () => {
  console.log(`ğŸš€ Server running on port ${PORT}`);
  console.log(`ğŸ“ Environment: ${process.env.NODE_ENV}`);
});
```

### 7. src/app.js (Express App) OluÅŸtur
```javascript
const express = require('express');
const cors = require('cors');
const errorMiddleware = require('./middleware/errorMiddleware');

const app = express();

// Middleware
app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({ 
    status: 'OK', 
    message: 'AI-Doctor API is running',
    timestamp: new Date().toISOString()
  });
});

// API Routes (ÅŸimdilik boÅŸ, sonraki aÅŸamalarda eklenecek)
app.get('/api', (req, res) => {
  res.json({ message: 'AI-Doctor API v1.0' });
});

// Error handling middleware (en sonda olmalÄ±)
app.use(errorMiddleware);

// 404 handler
app.use((req, res) => {
  res.status(404).json({ 
    success: false, 
    message: 'Endpoint not found' 
  });
});

module.exports = app;
```

### 8. Middleware DosyalarÄ±nÄ± OluÅŸtur

**src/middleware/errorMiddleware.js**
```javascript
const errorMiddleware = (err, req, res, next) => {
  console.error('Error:', err);

  const statusCode = err.statusCode || 500;
  const message = err.message || 'Internal Server Error';

  res.status(statusCode).json({
    success: false,
    message,
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
};

module.exports = errorMiddleware;
```

**src/middleware/authMiddleware.js** (boÅŸ template, sonra dolduracaÄŸÄ±z)
```javascript
const jwt = require('jsonwebtoken');

const protect = async (req, res, next) => {
  // Bu aÅŸamada sadece template, AÅŸama 2'de dolduracaÄŸÄ±z
  next();
};

module.exports = { protect };
```

### 9. Utils DosyalarÄ±nÄ± OluÅŸtur

**src/utils/response.js**
```javascript
const successResponse = (res, statusCode, message, data = null) => {
  return res.status(statusCode).json({
    success: true,
    message,
    data
  });
};

const errorResponse = (res, statusCode, message, error = null) => {
  return res.status(statusCode).json({
    success: false,
    message,
    ...(process.env.NODE_ENV === 'development' && error && { error })
  });
};

module.exports = {
  successResponse,
  errorResponse
};
```

**src/utils/logger.js**
```javascript
const logger = {
  info: (message, meta = {}) => {
    console.log(`[INFO] ${new Date().toISOString()} - ${message}`, meta);
  },
  error: (message, meta = {}) => {
    console.error(`[ERROR] ${new Date().toISOString()} - ${message}`, meta);
  },
  warn: (message, meta = {}) => {
    console.warn(`[WARN] ${new Date().toISOString()} - ${message}`, meta);
  }
};

module.exports = logger;
```

### 10. src/config/constants.js OluÅŸtur
```javascript
module.exports = {
  USER_ROLES: {
    DOCTOR: 'doctor',
    ADMIN: 'admin'
  },
  PATIENT_STATUS: {
    EVALUATION: 'evaluation',
    LAB_WAITING: 'lab-waiting',
    CONSULTATION: 'consultation',
    READY: 'ready',
    DISCHARGED: 'discharged'
  },
  PATIENT_PRIORITY: {
    LOW: 'low',
    MEDIUM: 'medium',
    HIGH: 'high',
    CRITICAL: 'critical'
  },
  SUBSCRIPTION_TYPES: {
    FREE: 'free',
    PREMIUM: 'premium',
    ENTERPRISE: 'enterprise'
  },
  FREE_PATIENT_LIMIT: 3
};
```

---

## âœ… Test AdÄ±mlarÄ±

Bu aÅŸamayÄ± tamamladÄ±ktan sonra ÅŸunlarÄ± test edin:

1. **Backend Ã§alÄ±ÅŸÄ±yor mu?**
```bash
cd backend
npm run dev
```

2. **Health check endpoint Ã§alÄ±ÅŸÄ±yor mu?**
```bash
# Yeni bir terminal aÃ§Ä±n
curl http://localhost:5000/health
```

Beklenen Ã§Ä±ktÄ±:
```json
{
  "status": "OK",
  "message": "AI-Doctor API is running",
  "timestamp": "2024-01-01T12:00:00.000Z"
}
```

3. **API endpoint Ã§alÄ±ÅŸÄ±yor mu?**
```bash
curl http://localhost:5000/api
```

Beklenen Ã§Ä±ktÄ±:
```json
{
  "message": "AI-Doctor API v1.0"
}
```

---

## ğŸ“ Tamamlanma Kriterleri

âœ… Backend klasÃ¶r yapÄ±sÄ± oluÅŸturuldu  
âœ… TÃ¼m baÄŸÄ±mlÄ±lÄ±klar yÃ¼klendi  
âœ… server.js ve app.js dosyalarÄ± Ã§alÄ±ÅŸÄ±yor  
âœ… Health check endpoint baÅŸarÄ±lÄ±  
âœ… Middleware'ler oluÅŸturuldu  
âœ… Utils fonksiyonlarÄ± hazÄ±r  
âœ… .env.example hazÄ±r  
âœ… .gitignore ayarlandÄ±  

---

## ğŸš€ Sonraki AdÄ±m

Bu aÅŸama tamamlandÄ±ÄŸÄ±nda **PROMPT 2: Authentication Sistemi** ile devam edeceÄŸiz.

Åimdilik mobil uygulamayÄ± bekletiyoruz, Ã¶nce backend'i tamamlayacaÄŸÄ±z.

---

## âš ï¸ Ã–nemli Notlar

1. **HenÃ¼z Prisma schema oluÅŸturmadÄ±k** - Bu Prompt 3'te olacak
2. **HenÃ¼z route'lar eklemedik** - Bu Prompt 2'de baÅŸlayacak
3. **.env dosyasÄ±nÄ± .gitignore'a eklemeyi unutmayÄ±n**
4. **PORT 5000 meÅŸgulse baÅŸka port kullanabilirsiniz**

---

**Bu prompt tamamlandÄ±ÄŸÄ±nda "Prompt 1 tamamlandÄ±" diye cevap verin ve Prompt 2'ye geÃ§in.**
